 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/loopyti-dev/custom-gpt-actions.yaml b/loopyti-dev/custom-gpt-actions.yaml
index 406cc4d8a5206489d13a48310922481746fe53df..1dee3bea429fee3b0c3a197325a031ffd9c437c2 100644
--- a/loopyti-dev/custom-gpt-actions.yaml
+++ b/loopyti-dev/custom-gpt-actions.yaml
@@ -1,92 +1,86 @@
 openapi: 3.1.0
 info:
   title: Loopyti Image Pipeline
   version: 1.0.0
   description: |
     Edge functions for processing PNG images after generation and for optional manual resizing.
 servers:
   - url: https://{project_ref}.functions.supabase.co
     description: Supabase Edge Functions base URL
     variables:
       project_ref:
         default: YOUR_SUPABASE_PROJECT_REF
 paths:
   /postprocess-images:
     post:
       summary: Postprocess freshly generated PNG images.
       description: |
-        Removes transparent padding, resizes the image so that the longest edge is 2048px, embeds 300 DPI metadata, and returns the PNG as Base64 without writing to storage.
+        Removes transparent padding, resizes the image so that the longest edge is 2048px, embeds 300 DPI metadata, uploads the processed PNG to temporary Supabase Storage, and returns signed download URLs.
       operationId: postprocessImages
       security:
         - bearerAuth: []
       requestBody:
         required: true
         content:
           application/json:
             schema:
               type: object
               properties:
                 images:
                   type: array
                   minItems: 1
                   description: List of Base64-encoded PNG images (data URI prefix optional).
                   items:
                     type: string
               required:
                 - images
       responses:
         '200':
-          description: Processed images with transparent padding removed, resized, and tagged with 300 DPI metadata.
+          description: Processed PNG download links.
           content:
             application/json:
               schema:
                 type: object
                 properties:
-                  ok:
+                  success:
                     type: boolean
-                  images:
+                  results:
                     type: array
                     items:
                       type: object
                       properties:
                         index:
                           type: integer
                         width:
                           type: integer
                         height:
                           type: integer
-                        base64:
+                        url:
                           type: string
-                          description: Base64 encoded PNG output (no data URI prefix).
-                        original:
-                          type: object
-                          properties:
-                            width:
-                              type: integer
-                            height:
-                              type: integer
+                          format: uri
+                          example: "https://ysfaaxlutynasreoegaf.supabase.co/storage/v1/object/sign/temp/post_1234.png"
         '400':
           description: Invalid payload
         '500':
           description: Internal error
   /resize-images:
     post:
       summary: Resize PNG images by scale or explicit dimensions.
       description: |
         Resizes existing PNG images on demand without touching storage. Each image can supply its own scale factor or explicit target dimensions. Outputs Base64 PNG with 300 DPI metadata.
       operationId: resizeImages
       security:
         - bearerAuth: []
       requestBody:
         required: true
         content:
           application/json:
             schema:
               type: object
               properties:
                 scale:
                   type: number
                   description: Default scale multiplier applied when an item omits its own scale and explicit dimensions.
                 images:
                   type: array
                   minItems: 1
@@ -134,30 +128,31 @@ paths:
                         base64:
                           type: string
                           nullable: true
                         width:
                           type: integer
                           nullable: true
                         height:
                           type: integer
                           nullable: true
                         scale:
                           type: number
                           nullable: true
                         original:
                           type: object
                           nullable: true
                           properties:
                             width:
                               type: integer
                             height:
                               type: integer
         '400':
           description: Invalid payload
         '500':
           description: Internal error
 components:
+  schemas: {}
   securitySchemes:
     bearerAuth:
       type: http
       scheme: bearer
       bearerFormat: JWT
 
EOF
)
